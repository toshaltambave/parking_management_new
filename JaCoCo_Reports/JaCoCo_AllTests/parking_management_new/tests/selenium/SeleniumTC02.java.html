<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>SeleniumTC02.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">Merged (Apr 28, 2019 10:57:19 PM)</a> &gt; <a href="../../index.html" class="el_group">parking_management_new</a> &gt; <a href="../index.html" class="el_bundle">tests</a> &gt; <a href="index.source.html" class="el_package">selenium</a> &gt; <span class="el_source">SeleniumTC02.java</span></div><h1>SeleniumTC02.java</h1><pre class="source lang-java linenums">package selenium;

import java.io.FileInputStream;
import java.util.Properties;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import org.junit.runner.RunWith;

import static org.junit.Assert.*;
import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.Select;

import functions.BusinessFunctions;
import junitparams.FileParameters;
import junitparams.JUnitParamsRunner;
import test.Data.TestDAO;
import org.junit.FixMethodOrder;
import org.junit.Test;
import org.junit.runners.MethodSorters;
import model.Role;

@RunWith(JUnitParamsRunner.class)
@FixMethodOrder(MethodSorters.NAME_ASCENDING)
<span class="fc" id="L26">public class SeleniumTC02 extends BusinessFunctions {</span>
	private WebDriver driver;
//	private boolean acceptNextAlert = true;
<span class="fc" id="L29">	private StringBuffer verificationErrors = new StringBuffer();</span>
<span class="fc" id="L30">	private BusinessFunctions functions = new BusinessFunctions();</span>

	private String appUrl;
	private String sharedUIMapPath;

	@Before
	public void setUp() throws Exception {
		// Change to FireFoxDriver if using FireFox browser
		//FireFox Driver
<span class="fc" id="L39">		   System.setProperty(&quot;webdriver.firefox.marionette&quot;, &quot;C:\\GeckoSelenium\\geckodriver.exe&quot;);</span>
<span class="fc" id="L40">		   driver = new FirefoxDriver();</span>
//		System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\ChromeDriver\\chromedriver.exe&quot;);
//		driver = new ChromeDriver();
<span class="fc" id="L43">		prop = new Properties();</span>
<span class="fc" id="L44">		prop.load(new FileInputStream(&quot;./Configuration/Configuration.properties&quot;));</span>
<span class="fc" id="L45">		int timewait = (Integer.parseInt(prop.getProperty(&quot;wait_time&quot;)));</span>
<span class="fc" id="L46">		driver.manage().timeouts().implicitlyWait(timewait, TimeUnit.SECONDS);</span>
<span class="fc" id="L47">		appUrl = prop.getProperty(&quot;AppUrl&quot;);</span>
<span class="fc" id="L48">		sharedUIMapPath = prop.getProperty(&quot;SharedUIMapPath&quot;);</span>
<span class="fc" id="L49">		prop.load(new FileInputStream(sharedUIMapPath));</span>

<span class="fc" id="L51">		driver.get(appUrl);</span>
<span class="fc" id="L52">		driver.manage().window().setSize(new Dimension(1440,850));</span>
<span class="fc" id="L53">	}</span>

	/**
	 * This Test all combinations of validation errors a user can see in the
	 * login and registration screens.
	 * 
	 * @throws Exception
	 */
	@Test
	@FileParameters(&quot;tests/Excel/RegisterFailures.csv&quot;)
	public void aParkingManagerRegistration(String userName, String password, String confirmPassword, String role,
			String permitType, String exceptedErrorMsg, String expectedUsernameError, String expectedPasswordError,
			String expectedConfirmPaswordError) throws Exception {
<span class="fc" id="L66">		driver.findElement(By.id(prop.getProperty(&quot;Btn_Login_Register&quot;))).click();</span>
		
<span class="fc" id="L68">		TestDAO.deleteUser(userName);</span>
//		if (&quot;Username is already in database&quot;.equals(expectedUsernameError) &amp;&amp; !TestDAO.userExists(userName)) {
//			registerUser(userName, correctPassword,role,permitType,firstName,middleName,lastName,
//					sex,dob,address,email,phoneNum,dlno,dlexpiry,regNum,utaId);
//		}
		
<span class="fc bfc" id="L74" title="All 2 branches covered.">		if (&quot;None&quot;.equals(userName)) {</span>
			// Nothing entered - all errors present
<span class="fc" id="L76">			driver.findElement(By.id(prop.getProperty(&quot;Btn_Register_Register&quot;))).click();</span>
<span class="fc" id="L77">		} else {</span>
			// UserName all ready in DataBase
<span class="fc" id="L79">			functions.Register(driver, userName, password, confirmPassword, Role.ParkingManager.toString(), permitType);</span>
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">			if (&quot;Username is already in database&quot;.equals(expectedUsernameError)) {</span>
<span class="nc" id="L81">				TestDAO.deleteUser(userName);</span>
			}
		}
<span class="fc" id="L84">		assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Login_CommonError&quot;))).getAttribute(&quot;value&quot;)</span>
<span class="fc" id="L85">				.equals(exceptedErrorMsg));</span>
<span class="fc" id="L86">		assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Register_UsernameError&quot;))).getAttribute(&quot;value&quot;)</span>
<span class="fc" id="L87">				.equals(expectedUsernameError));</span>
<span class="fc" id="L88">		assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Register_PasswordError&quot;))).getAttribute(&quot;value&quot;)</span>
<span class="fc" id="L89">				.equals(expectedPasswordError));</span>
<span class="fc" id="L90">		assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Register_ConfirmPasswordError&quot;)))</span>
<span class="fc" id="L91">				.getAttribute(&quot;value&quot;).equals(expectedConfirmPaswordError));</span>

<span class="fc" id="L93">	}</span>

	@Test
	@FileParameters(&quot;tests/Excel/UserDetailsFailures.csv&quot;)
	public void bParkingManagerUserDetails(String firstName, String middleName, String lastName, String sex,
			String dob, String address, String email, String phoneNum, String dlNum, String expiryDate, String regNum,
			String utaId, String expectedErrorMsg, String expectedFirstNameError, String expectedMiddleNameError,
			String expectedLastNameError, String expectedDobError, String expectedAddressError,
			String expectedEmailError, String expectedPhoneNumError, String expectedDlNumError,
			String expectedDlExpiryError, String RegNumError, String utaIdError, String userName, String password, String confirmPassword, String role,
			String permitType) throws Exception {
<span class="fc" id="L104">		driver.findElement(By.id(prop.getProperty(&quot;Btn_Login_Register&quot;))).click();</span>
		
<span class="fc bfc" id="L106" title="All 2 branches covered.">		if (TestDAO.userExists(userName)) {</span>
<span class="fc" id="L107">			TestDAO.deleteUser(userName);</span>
		}
		
<span class="fc" id="L110">		functions.Register(driver, userName, password, confirmPassword, Role.ParkingManager.toString(), permitType);</span>


<span class="fc bfc" id="L113" title="All 2 branches covered.">		if(&quot;None&quot;.equals(firstName)){</span>
			 //Nothing Entered all errors present
<span class="fc" id="L115">			 driver.findElement(By.id(prop.getProperty(&quot;Btn_UserDetails_Submit&quot;))).click();</span>
<span class="fc" id="L116">		}else{</span>
<span class="fc" id="L117">			 functions.RegisterUserDetails(driver, firstName, middleName, lastName, sex, dob, address, email, phoneNum, dlNum, expiryDate, regNum, utaId);</span>
		}
<span class="fc" id="L119">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_CommonError&quot;))).getAttribute(&quot;value&quot;).equals(expectedErrorMsg));</span>
<span class="fc" id="L120">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_FirstnameError&quot;))).getAttribute(&quot;value&quot;).equals(expectedFirstNameError));</span>
<span class="fc" id="L121">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_MiddlenameError&quot;))).getAttribute(&quot;value&quot;).equals(expectedMiddleNameError));</span>
<span class="fc" id="L122">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_LastnameError&quot;))).getAttribute(&quot;value&quot;).equals(expectedLastNameError));</span>
<span class="fc" id="L123">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_DOBError&quot;))).getAttribute(&quot;value&quot;).equals(expectedDobError));</span>
<span class="fc" id="L124">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_AddressError&quot;))).getAttribute(&quot;value&quot;).equals(expectedAddressError));</span>
<span class="fc" id="L125">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_EmailError&quot;))).getAttribute(&quot;value&quot;).equals(expectedEmailError));</span>
<span class="fc" id="L126">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_PhoneError&quot;))).getAttribute(&quot;value&quot;).equals(expectedPhoneNumError));</span>
<span class="fc" id="L127">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_DLNOError&quot;))).getAttribute(&quot;value&quot;).equals(expectedDlNumError));</span>
<span class="fc" id="L128">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_DLExpiryDteError&quot;))).getAttribute(&quot;value&quot;).equals(expectedDlExpiryError));</span>
<span class="fc" id="L129">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_REGNOError&quot;))).getAttribute(&quot;value&quot;).equals(RegNumError));</span>
<span class="fc" id="L130">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_UserDetails_UTAIDError&quot;))).getAttribute(&quot;value&quot;).equals(utaIdError));</span>

<span class="fc" id="L132">	}</span>
	
	@Test
	@FileParameters(&quot;tests/Excel/RegisterLoginFailures.csv&quot;)
	public void cParkingManagerLogin(String userName, String password, String expectedErrorMsg, String expectedUserNameError, String expectedPasswordError,String reguserName, String regpassword, String confirmPassword, String role,
			String permitType,String firstName, String middleName, String lastName, String sex,
			String dob, String address, String email, String phoneNum, String dlNum, String expiryDate, String regNum,
			String utaId){
		
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">		if (TestDAO.userExists(reguserName)) {</span>
<span class="fc" id="L142">			TestDAO.deleteUser(reguserName);</span>
		}
<span class="fc" id="L144">		driver.findElement(By.id(prop.getProperty(&quot;Btn_Login_Register&quot;))).click();</span>
		
<span class="fc" id="L146">		functions.Register(driver, reguserName, regpassword, confirmPassword, Role.ParkingManager.toString(), permitType);</span>
<span class="fc" id="L147">		functions.RegisterUserDetails(driver, firstName, middleName, lastName, sex, dob, address, email, phoneNum, dlNum, expiryDate, regNum, utaId);</span>
		
<span class="fc bfc" id="L149" title="All 2 branches covered.">		if(&quot;None&quot;.equals(userName)){</span>
<span class="fc" id="L150">			functions.Login(driver, &quot;&quot;, &quot;&quot;);</span>
<span class="fc" id="L151">		}else{</span>
<span class="fc" id="L152">			functions.Login(driver, userName, password);</span>
		}
<span class="fc" id="L154">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Login_CommonError&quot;))).getAttribute(&quot;value&quot;).equals(expectedErrorMsg));</span>
<span class="fc" id="L155">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Login_UsernameError&quot;))).getAttribute(&quot;value&quot;).equals(expectedUserNameError));</span>
<span class="fc" id="L156">		 assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Login_UsernameError&quot;))).getAttribute(&quot;value&quot;).equals(expectedPasswordError));</span>
		
<span class="fc" id="L158">	}</span>
	
	@Test
	@FileParameters(&quot;tests/Excel/GoodTest.csv&quot;)
	public void dParkingManagerHappy(String userName, String password, String confirmPassword, String role,
			String permitType, String firstName, String middleName, String lastName, String sex, String dayOfBirth,
			String address, String email, String phoneNum, String dlNum, String dayOfExpiry, String regNum,
			String utaId, String userToSearch) throws Exception {
<span class="fc" id="L166">		driver.get(appUrl);</span>
//		driver.manage().window().setSize(new Dimension(1936, 1056));
<span class="pc bpc" id="L168" title="1 of 2 branches missed.">		assertTrue(!isElementPresent(driver, &quot;Txt_Register_Success&quot;));</span>
<span class="fc" id="L169">		driver.findElement(By.id(prop.getProperty(&quot;Btn_Login_Register&quot;))).click();</span>
<span class="pc bpc" id="L170" title="1 of 2 branches missed.">		if (TestDAO.userExists(userName)) {</span>
<span class="fc" id="L171">			TestDAO.deleteReservation(userName);</span>
<span class="fc" id="L172">			TestDAO.deleteUser(userName);</span>
		}
<span class="fc" id="L174">		functions.Register(driver, userName, password, confirmPassword, Role.ParkingManager.toString(), permitType);</span>
<span class="fc" id="L175">		functions.RegisterUserDetails(driver, firstName, middleName, lastName, sex, dayOfBirth, address, email,</span>
<span class="fc" id="L176">				phoneNum, dlNum, dayOfExpiry, regNum, utaId);</span>
<span class="fc" id="L177">		assertTrue(driver.findElement(By.id(prop.getProperty(&quot;Txt_Register_Success&quot;))).getText()</span>
<span class="fc" id="L178">				.equals(&quot;Registered Successfully.&quot;));</span>
<span class="fc" id="L179">		functions.Login(driver, userName, password);</span>
<span class="fc" id="L180">		functions.searchUserbyUserName(driver, userToSearch);</span>
<span class="fc" id="L181">		driver.findElement(By.id(prop.getProperty(&quot;Btn_User_Home_Page&quot;))).click();</span>
//		functions.setNoShow(driver, userName);
//		functions.setNoShow(driver, userName);
//		functions.setOverdue(driver, userName);
//		functions.setOverdue(driver, userName);
<span class="fc" id="L186">		driver.findElement(By.id(prop.getProperty(&quot;Btn_User_Logout&quot;))).click();</span>
<span class="fc" id="L187">	}</span>
	
	

//	private void registerUser(String userName,String password, String role, String permitType, String firstName, String middleName, String lastName, String sex, String dob
//			,String address, String email, String phoneNum,String dlno, String dlexpiry, String regNum, String utaId) {
//		driver.get(appUrl);
//		functions.Register(driver, userName, password, password, role, permitType);
//		functions.RegisterUserDetails(driver, firstName, middleName, lastName, sex, dob, address, email, phoneNum,
//				dlno, dlexpiry, regNum, utaId);
//		functions.Login(driver, userName, password);
//		driver.findElement(By.id(prop.getProperty(&quot;Btn_User_Logout&quot;))).click();
//	}

	@After
	public void tearDown() throws Exception {
<span class="fc" id="L203">		driver.quit();</span>
<span class="fc" id="L204">		String verificationErrorString = verificationErrors.toString();</span>
<span class="pc bpc" id="L205" title="1 of 2 branches missed.">		if (!&quot;&quot;.equals(verificationErrorString)) {</span>
<span class="nc" id="L206">			fail(verificationErrorString);</span>
		}
<span class="fc" id="L208">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span>Merged (Apr 28, 2019 10:57:19 PM)</div></body></html>